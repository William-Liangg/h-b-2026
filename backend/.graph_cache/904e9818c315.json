{"files": ["README.md", "components/AnswerBoard.tsx", "components/DrawingCanvas.tsx", "components/DrawingViewer.tsx", "components/KickModal.tsx", "components/KickedModal.tsx", "components/ParticipantsSidebar.tsx", "components/PrivateAnswerPad.tsx", "components/QuestionPrompt.tsx", "components/RevealButton.tsx", "components/RoomIdInput.tsx", "components/Timer.tsx", "components/UsernameInput.tsx", "lib/keys.ts", "lib/prisma.ts", "next-env.d.ts", "package-lock.json", "package.json", "pages/_app.tsx", "pages/api/debug-db.ts", "pages/api/debug.ts", "pages/api/room.ts", "pages/api/room/[roomId].ts", "pages/api/room/[roomId]/answers.ts", "pages/api/room/[roomId]/kick.ts", "pages/api/room/[roomId]/users.ts", "pages/api/test-connection.ts", "pages/api/test.ts", "pages/index.tsx", "pages/room/[roomId].tsx", "postcss.config.js", "prisma/migrations/20250812173833_add_user_tracking/migration.sql", "prisma/migrations/migration_lock.toml", "styles/globals.css", "tailwind.config.js", "tsconfig.json", "vercel.json"], "edges": [], "root": "/Users/yechancho/repos/h-b-2026/backend/.repos/904e9818c315", "file_analyses": {"README.md": {"importance_score": 9, "summary": "Primary project documentation explaining the architecture, data model, API design, and tech stack for StudyCore - a collaborative study app using PostgreSQL/Prisma.", "responsibilities": ["Documents complete system architecture and data flow", "Explains PostgreSQL data model with Room, User, and Answer entities", "Outlines API endpoints and real-time polling strategy", "Provides project structure and onboarding guide"], "key_exports": [], "onboarding_reason": "Essential starting point to understand the entire system architecture, database schema, and how all components work together."}, "components/AnswerBoard.tsx": {"importance_score": 5, "summary": "Displays submitted answers in a grid layout with conditional visibility based on reveal state.", "responsibilities": ["Renders answers in responsive grid format", "Shows/hides answer content based on revealed state", "Displays participant names with answers", "Handles empty answer states"], "key_exports": ["AnswerBoard"], "onboarding_reason": "Important UI component for the core answer display functionality that new developers working on the answers feature should understand."}, "components/DrawingCanvas.tsx": {"importance_score": 6, "summary": "Interactive drawing canvas component using Fabric.js for collaborative drawing with tools like pen, eraser, and canvas controls.", "responsibilities": ["Manages Fabric.js canvas initialization and configuration", "Provides drawing tools (pen/eraser) with customizable properties", "Handles canvas state changes and drawing data serialization", "Supports both interactive and read-only modes"], "key_exports": ["DrawingCanvas"], "onboarding_reason": "Complex component handling advanced drawing functionality - important for developers working on the drawing/collaboration features."}, "components/DrawingViewer.tsx": {"importance_score": 4, "summary": "Read-only viewer for displaying drawing data using Fabric.js with automatic centering and scaling.", "responsibilities": ["Renders drawing data in read-only format", "Handles automatic centering of drawings on canvas", "Manages canvas cleanup and reinitialization", "Processes and displays path objects from drawing data"], "key_exports": ["DrawingViewer"], "onboarding_reason": "Specialized component for displaying drawings - relevant for developers working on the drawing display features."}, "components/KickModal.tsx": {"importance_score": 3, "summary": "Modal dialog for confirming user kick actions with proper UI feedback and confirmation workflow.", "responsibilities": ["Displays confirmation dialog for kicking users", "Provides clear visual feedback with icons and messaging", "Handles user confirmation and cancellation actions", "Shows username being kicked for context"], "key_exports": ["KickModal"], "onboarding_reason": "Simple modal component for user management - useful for understanding the kick user workflow."}, "components/KickedModal.tsx": {"importance_score": 3, "summary": "Modal shown to users who have been kicked from a room, providing navigation back to home.", "responsibilities": ["Displays kicked notification to users", "Provides clear messaging about being removed", "Handles navigation back to home page", "Shows appropriate visual feedback"], "key_exports": ["KickedModal"], "onboarding_reason": "Simple notification component for the kick user flow - helps understand the user experience after being kicked."}, "components/ParticipantsSidebar.tsx": {"importance_score": 7, "summary": "Comprehensive sidebar showing room participants with online status, answer progress, host indicators, and kick functionality.", "responsibilities": ["Displays all room participants with real-time status", "Shows host designation with crown icon", "Tracks and displays answer submission status", "Provides kick functionality for hosts"], "key_exports": ["ParticipantsSidebar"], "onboarding_reason": "Core UI component that handles most of the user management and status display - essential for understanding room dynamics."}, "components/PrivateAnswerPad.tsx": {"importance_score": 4, "summary": "Text area component for users to input their private answers before submission.", "responsibilities": ["Provides text input interface for answers", "Handles controlled input state", "Supports disabled state for submission restrictions", "Maintains answer privacy until submission"], "key_exports": ["PrivateAnswerPad"], "onboarding_reason": "Simple but important input component for the core answer submission workflow."}, "components/QuestionPrompt.tsx": {"importance_score": 4, "summary": "Displays and optionally allows editing of the study question with conditional edit permissions.", "responsibilities": ["Displays current room question", "Provides editable interface for hosts", "Shows placeholder when no question is set", "Handles both view and edit modes"], "key_exports": ["QuestionPrompt"], "onboarding_reason": "Important component for question management - helps understand how hosts set questions for rooms."}, "components/RevealButton.tsx": {"importance_score": 4, "summary": "Button component that triggers the reveal of all submitted answers with proper state management.", "responsibilities": ["Provides reveal functionality for hosts", "Handles disabled state based on submission status", "Triggers answer revelation workflow", "Shows appropriate visual feedback"], "key_exports": ["RevealButton"], "onboarding_reason": "Simple but critical component for the answer reveal mechanism - key part of the study session workflow."}, "components/RoomIdInput.tsx": {"importance_score": 3, "summary": "Input component for entering room IDs to join existing rooms.", "responsibilities": ["Provides text input for room ID entry", "Handles controlled input state", "Shows appropriate labeling and placeholder text", "Supports room joining workflow"], "key_exports": ["RoomIdInput"], "onboarding_reason": "Simple input component for room joining - straightforward utility component."}, "components/Timer.tsx": {"importance_score": 2, "summary": "Timer display component that formats and shows countdown time in MM:SS format.", "responsibilities": ["Displays formatted countdown timer", "Converts seconds to minutes:seconds format", "Provides visual time feedback to users", "Uses monospace font for consistent display"], "key_exports": ["Timer", "formatTime"], "onboarding_reason": "Simple utility component for time display - minimal complexity but useful for timer features."}, "components/UsernameInput.tsx": {"importance_score": 3, "summary": "A reusable React component that renders a labeled username input field with validation.", "responsibilities": ["Renders a controlled input component for username entry", "Applies consistent styling with Tailwind CSS classes", "Handles user input changes through props callback", "Provides accessibility features with proper labeling"], "key_exports": ["UsernameInput"], "onboarding_reason": "New developers should understand this component as it's likely reused across forms for user identification."}, "lib/keys.ts": {"importance_score": 5, "summary": "Defines constants for localStorage keys used throughout the application for user data persistence.", "responsibilities": ["Centralizes localStorage key definitions", "Ensures consistent naming across the application", "Provides type-safe access to storage keys"], "key_exports": ["LS_USER_ID", "LS_USERNAME"], "onboarding_reason": "Important to understand as these keys are used for client-side user state persistence across the app."}, "lib/prisma.ts": {"importance_score": 8, "summary": "Configures and exports the Prisma database client with connection retry logic and environment-specific settings.", "responsibilities": ["Initializes Prisma client with proper configuration", "Implements database connection retry mechanism", "Manages client instance across development and production", "Provides error handling for database connection failures"], "key_exports": ["prisma", "prismaWithRetry"], "onboarding_reason": "Critical for understanding database interactions - all database operations go through this configured client."}, "next-env.d.ts": {"importance_score": 0, "summary": "Auto-generated TypeScript declarations file for Next.js framework integration.", "responsibilities": ["Provides TypeScript definitions for Next.js features", "Auto-generated and should not be manually edited"], "key_exports": [], "onboarding_reason": "Skip this file - it's auto-generated and contains only framework type definitions."}, "package-lock.json": {"importance_score": 0, "summary": "Auto-generated lockfile that pins exact dependency versions for consistent installs.", "responsibilities": ["Locks dependency versions for reproducible builds", "Generated automatically by npm"], "key_exports": [], "onboarding_reason": "Skip this file - it's auto-generated dependency metadata not meant for manual reading."}, "package.json": {"importance_score": 6, "summary": "Project configuration file defining dependencies, scripts, and metadata for the StudyCore application.", "responsibilities": ["Defines project dependencies and versions", "Configures build and development scripts", "Specifies project metadata and repository information", "Sets up Prisma schema location"], "key_exports": [], "onboarding_reason": "Essential for understanding project structure, available scripts, and technology stack including Next.js, React, Prisma, and Firebase."}, "pages/_app.tsx": {"importance_score": 9, "summary": "Next.js application root component that wraps all pages with global styles and shared functionality.", "responsibilities": ["Serves as the root component for all pages", "Imports global CSS styles", "Provides shared layout and state management entry point", "Handles page transitions and global app state"], "key_exports": ["MyApp"], "onboarding_reason": "Critical entry point - understanding this file is essential as it affects every page in the application."}, "pages/api/debug-db.ts": {"importance_score": 2, "summary": "Debug API endpoint for testing database connectivity and troubleshooting connection issues.", "responsibilities": ["Tests basic database connection functionality", "Provides debugging information for database setup", "Returns connection status and environment details", "Helps diagnose database configuration problems"], "key_exports": [], "onboarding_reason": "Useful for debugging but not core to application functionality - can be skipped unless troubleshooting database issues."}, "pages/api/debug.ts": {"importance_score": 2, "summary": "Debug API endpoint for testing Prisma client initialization and basic functionality.", "responsibilities": ["Tests Prisma client creation and connection", "Provides environment and configuration debugging info", "Validates database setup without data operations", "Returns detailed error information for troubleshooting"], "key_exports": [], "onboarding_reason": "Development utility for debugging - not essential for understanding core application logic."}, "pages/api/room.ts": {"importance_score": 7, "summary": "API endpoint for creating new study rooms with host assignment and basic room configuration.", "responsibilities": ["Handles POST requests to create new rooms", "Assigns hostId to room creators", "Implements error handling for room creation", "Uses retry logic for database operations"], "key_exports": [], "onboarding_reason": "Important API endpoint that new developers should understand as it handles core room creation functionality."}, "pages/api/room/[roomId].ts": {"importance_score": 7, "summary": "API endpoint for fetching and updating individual room data including questions and reveal status.", "responsibilities": ["Handles GET requests to fetch room details", "Processes PATCH requests to update room state", "Manages question updates with answer clearing logic", "Implements proper error handling and validation"], "key_exports": [], "onboarding_reason": "Core API for room management that developers need to understand for implementing room-based features."}, "pages/api/room/[roomId]/answers.ts": {"importance_score": 8, "summary": "API endpoint managing student answers within rooms, supporting both text and drawing submissions with user management.", "responsibilities": ["Handles GET requests to fetch all answers for a room", "Processes POST requests to submit new answers", "Manages user creation and updates within rooms", "Supports both text and drawing data formats with JSON serialization"], "key_exports": [], "onboarding_reason": "Critical API endpoint for the core answer submission functionality - essential for understanding how student responses work."}, "pages/api/room/[roomId]/kick.ts": {"importance_score": 6, "summary": "API endpoint for kicking users from rooms, implementing host-only authorization and cascading deletion of user data.", "responsibilities": ["Validate host permissions before allowing user removal", "Delete kicked user and their associated answers from database", "Prevent hosts from kicking themselves", "Handle error cases for invalid rooms or users"], "key_exports": ["handler (default)"], "onboarding_reason": "Important for understanding room moderation features and user management permissions flow."}, "pages/api/room/[roomId]/users.ts": {"importance_score": 7, "summary": "API endpoint for managing room participants with GET, POST, and DELETE operations for user lifecycle.", "responsibilities": ["Fetch and sort room users (host first)", "Add new users to rooms or update existing user data", "Remove users from rooms", "Handle user session management with lastSeen timestamps"], "key_exports": ["handler (default)"], "onboarding_reason": "Core API for user management in rooms - essential for understanding how participants join/leave rooms."}, "pages/api/test-connection.ts": {"importance_score": 2, "summary": "Development utility endpoint for testing database connection configuration without actual database queries.", "responsibilities": ["Validate DATABASE_URL environment variable exists", "Check basic connection string format", "Provide diagnostic information for debugging"], "key_exports": ["handler (default)"], "onboarding_reason": "Development/debugging tool only - not critical for understanding core application logic."}, "pages/api/test.ts": {"importance_score": 1, "summary": "Simple diagnostic endpoint that returns environment information for debugging purposes.", "responsibilities": ["Return environment configuration details", "Check database URL presence", "Provide timestamp for request tracking"], "key_exports": ["handler (default)"], "onboarding_reason": "Basic debugging utility - minimal value for understanding application functionality."}, "pages/index.tsx": {"importance_score": 9, "summary": "Main landing page and entry point for the StudyCore application, handling room creation and joining workflows.", "responsibilities": ["Render landing page with create/join room options", "Handle user registration and room creation flow", "Manage localStorage for user IDs and usernames", "Route users to appropriate room pages"], "key_exports": ["LandingPage (default)"], "onboarding_reason": "Primary entry point - essential for understanding user onboarding flow and application structure."}, "pages/room/[roomId].tsx": {"importance_score": 10, "summary": "Core room page component managing real-time study sessions with polling, answer submission, and user interactions.", "responsibilities": ["Manage room state with real-time polling", "Handle text and drawing answer submissions", "Coordinate user management and kick functionality", "Implement host controls for questions and answer revelation"], "key_exports": ["RoomPage (default)", "Answer interface", "apiJSON helper"], "onboarding_reason": "Main application component - absolutely critical for understanding core study room functionality and real-time features."}, "postcss.config.js": {"importance_score": 1, "summary": "PostCSS configuration file for CSS processing with Tailwind CSS and Autoprefixer plugins.", "responsibilities": ["Configure Tailwind CSS processing", "Enable autoprefixer for browser compatibility"], "key_exports": ["module.exports configuration"], "onboarding_reason": "Build tool configuration - not relevant for understanding application logic."}, "prisma/migrations/20250812173833_add_user_tracking/migration.sql": {"importance_score": 4, "summary": "Database schema migration defining the core data model with Room, User, and Answer tables and relationships.", "responsibilities": ["Create Room table with host tracking", "Define User table with room associations", "Establish Answer table with foreign key relationships", "Set up cascading deletes and unique constraints"], "key_exports": ["SQL schema definitions"], "onboarding_reason": "Important for understanding the data model and relationships between rooms, users, and answers."}, "prisma/migrations/migration_lock.toml": {"importance_score": 0, "summary": "Prisma migration lock file specifying the database provider (SQLite) for schema management.", "responsibilities": ["Lock database provider to SQLite"], "key_exports": ["provider configuration"], "onboarding_reason": "Auto-generated lock file - no value for understanding application functionality."}, "styles/globals.css": {"importance_score": 1, "summary": "Global CSS file importing Tailwind CSS utilities for application styling.", "responsibilities": ["Import Tailwind CSS base styles", "Import Tailwind CSS components", "Import Tailwind CSS utilities"], "key_exports": ["CSS imports"], "onboarding_reason": "Basic styling configuration - minimal impact on understanding application logic."}, "tailwind.config.js": {"importance_score": 1, "summary": "Tailwind CSS configuration extending the default theme with custom colors for the StudyCore design system.", "responsibilities": ["Define content paths for CSS purging", "Extend theme with custom green/emerald color palette", "Configure build optimization"], "key_exports": ["module.exports configuration"], "onboarding_reason": "Styling configuration - not critical for understanding core functionality."}, "tsconfig.json": {"importance_score": 1, "summary": "TypeScript configuration file with Next.js-specific settings for type checking and compilation.", "responsibilities": ["Configure TypeScript compilation options", "Set module resolution and JSX handling", "Define include/exclude patterns"], "key_exports": ["TypeScript configuration"], "onboarding_reason": "Build configuration - not relevant for understanding application behavior."}, "vercel.json": {"importance_score": 2, "summary": "Vercel deployment configuration file that specifies build commands and framework settings for a Next.js application with Prisma database integration.", "responsibilities": ["Configure Vercel deployment settings", "Define build pipeline with Prisma generation", "Specify Next.js as the target framework", "Set npm as the package installation method"], "key_exports": [], "onboarding_reason": "New developers should briefly review this to understand the deployment setup and build process, but it's not essential for day-to-day development."}}, "onboarding_path": [{"file": "README.md", "summary": "Primary project documentation explaining the architecture, data model, API design, and tech stack for StudyCore - a collaborative study app using PostgreSQL/Prisma.", "reason": "Start here to understand the overall architecture, data model, and tech stack of StudyCore before diving into the code", "importance_score": 9, "responsibilities": ["Documents complete system architecture and data flow", "Explains PostgreSQL data model with Room, User, and Answer entities", "Outlines API endpoints and real-time polling strategy", "Provides project structure and onboarding guide"], "key_exports": []}, {"file": "package.json", "summary": "Project configuration file defining dependencies, scripts, and metadata for the StudyCore application.", "reason": "Review dependencies and project configuration to understand what technologies and libraries are used", "importance_score": 6, "responsibilities": ["Defines project dependencies and versions", "Configures build and development scripts", "Specifies project metadata and repository information", "Sets up Prisma schema location"], "key_exports": []}, {"file": "lib/prisma.ts", "summary": "Configures and exports the Prisma database client with connection retry logic and environment-specific settings.", "reason": "Understand the database client setup and configuration, which is fundamental to the data layer", "importance_score": 8, "responsibilities": ["Initializes Prisma client with proper configuration", "Implements database connection retry mechanism", "Manages client instance across development and production", "Provides error handling for database connection failures"], "key_exports": ["prisma", "prismaWithRetry"]}, {"file": "pages/_app.tsx", "summary": "Next.js application root component that wraps all pages with global styles and shared functionality.", "reason": "Learn how the Next.js application is structured and what global functionality is applied to all pages", "importance_score": 9, "responsibilities": ["Serves as the root component for all pages", "Imports global CSS styles", "Provides shared layout and state management entry point", "Handles page transitions and global app state"], "key_exports": ["MyApp"]}, {"file": "pages/index.tsx", "summary": "Main landing page and entry point for the StudyCore application, handling room creation and joining workflows.", "reason": "Explore the main entry point where users create or join rooms - this shows the primary user flow", "importance_score": 9, "responsibilities": ["Render landing page with create/join room options", "Handle user registration and room creation flow", "Manage localStorage for user IDs and usernames", "Route users to appropriate room pages"], "key_exports": ["LandingPage (default)"]}, {"file": "pages/api/room.ts", "summary": "API endpoint for creating new study rooms with host assignment and basic room configuration.", "reason": "Understand how new study rooms are created through the API, building on the room creation flow from the landing page", "importance_score": 7, "responsibilities": ["Handles POST requests to create new rooms", "Assigns hostId to room creators", "Implements error handling for room creation", "Uses retry logic for database operations"], "key_exports": []}, {"file": "pages/api/room/[roomId]/users.ts", "summary": "API endpoint for managing room participants with GET, POST, and DELETE operations for user lifecycle.", "reason": "Learn how users join and leave rooms, which is essential for understanding room participation", "importance_score": 7, "responsibilities": ["Fetch and sort room users (host first)", "Add new users to rooms or update existing user data", "Remove users from rooms", "Handle user session management with lastSeen timestamps"], "key_exports": ["handler (default)"]}, {"file": "pages/room/[roomId].tsx", "summary": "Core room page component managing real-time study sessions with polling, answer submission, and user interactions.", "reason": "Study the core room experience - this is the main functional component where collaborative studying happens", "importance_score": 10, "responsibilities": ["Manage room state with real-time polling", "Handle text and drawing answer submissions", "Coordinate user management and kick functionality", "Implement host controls for questions and answer revelation"], "key_exports": ["RoomPage (default)", "Answer interface", "apiJSON helper"]}, {"file": "pages/api/room/[roomId].ts", "summary": "API endpoint for fetching and updating individual room data including questions and reveal status.", "reason": "Understand how individual room data is fetched and updated to support the room page functionality", "importance_score": 7, "responsibilities": ["Handles GET requests to fetch room details", "Processes PATCH requests to update room state", "Manages question updates with answer clearing logic", "Implements proper error handling and validation"], "key_exports": []}, {"file": "pages/api/room/[roomId]/answers.ts", "summary": "API endpoint managing student answers within rooms, supporting both text and drawing submissions with user management.", "reason": "Learn how student answers are managed, which is a core feature of the collaborative study sessions", "importance_score": 8, "responsibilities": ["Handles GET requests to fetch all answers for a room", "Processes POST requests to submit new answers", "Manages user creation and updates within rooms", "Supports both text and drawing data formats with JSON serialization"], "key_exports": []}, {"file": "components/ParticipantsSidebar.tsx", "summary": "Comprehensive sidebar showing room participants with online status, answer progress, host indicators, and kick functionality.", "reason": "Explore how participants are displayed and managed within a room, building on user management knowledge", "importance_score": 7, "responsibilities": ["Displays all room participants with real-time status", "Shows host designation with crown icon", "Tracks and displays answer submission status", "Provides kick functionality for hosts"], "key_exports": ["ParticipantsSidebar"]}, {"file": "components/DrawingCanvas.tsx", "summary": "Interactive drawing canvas component using Fabric.js for collaborative drawing with tools like pen, eraser, and canvas controls.", "reason": "Understand the drawing functionality that enables visual answer submissions and collaboration", "importance_score": 6, "responsibilities": ["Manages Fabric.js canvas initialization and configuration", "Provides drawing tools (pen/eraser) with customizable properties", "Handles canvas state changes and drawing data serialization", "Supports both interactive and read-only modes"], "key_exports": ["DrawingCanvas"]}, {"file": "pages/api/room/[roomId]/kick.ts", "summary": "API endpoint for kicking users from rooms, implementing host-only authorization and cascading deletion of user data.", "reason": "Learn about host privileges and user moderation capabilities, completing the understanding of room management", "importance_score": 6, "responsibilities": ["Validate host permissions before allowing user removal", "Delete kicked user and their associated answers from database", "Prevent hosts from kicking themselves", "Handle error cases for invalid rooms or users"], "key_exports": ["handler (default)"]}]}