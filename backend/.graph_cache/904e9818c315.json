{"files": ["README.md", "components/AnswerBoard.tsx", "components/DrawingCanvas.tsx", "components/DrawingViewer.tsx", "components/KickModal.tsx", "components/KickedModal.tsx", "components/ParticipantsSidebar.tsx", "components/PrivateAnswerPad.tsx", "components/QuestionPrompt.tsx", "components/RevealButton.tsx", "components/RoomIdInput.tsx", "components/Timer.tsx", "components/UsernameInput.tsx", "lib/keys.ts", "lib/prisma.ts", "next-env.d.ts", "package-lock.json", "package.json", "pages/_app.tsx", "pages/api/debug-db.ts", "pages/api/debug.ts", "pages/api/room.ts", "pages/api/room/[roomId].ts", "pages/api/room/[roomId]/answers.ts", "pages/api/room/[roomId]/kick.ts", "pages/api/room/[roomId]/users.ts", "pages/api/test-connection.ts", "pages/api/test.ts", "pages/index.tsx", "pages/room/[roomId].tsx", "postcss.config.js", "prisma/migrations/20250812173833_add_user_tracking/migration.sql", "prisma/migrations/migration_lock.toml", "styles/globals.css", "tailwind.config.js", "tsconfig.json", "vercel.json"], "edges": [], "root": "/Users/yechancho/repos/h-b-2026/backend/.repos/904e9818c315", "file_analyses": {"README.md": {"importance_score": 8, "summary": "Project documentation explaining the architecture, data model, and workflow of StudyCore - a collaborative study app using PostgreSQL + Prisma.", "responsibilities": ["Documents the complete project architecture and technology stack", "Explains the Prisma data model (Room, User, Answer entities)", "Describes the real-time polling data flow and API structure", "Provides project structure overview and setup guidance"], "key_exports": [], "onboarding_reason": "Essential starting point for understanding the project's architecture, database schema, and how components work together."}, "components/AnswerBoard.tsx": {"importance_score": 5, "summary": "React component that displays submitted answers in a grid layout, hiding content until answers are revealed.", "responsibilities": ["Renders answers in a responsive grid layout", "Conditionally shows/hides answer content based on revealed state", "Displays participant names with their answers", "Handles empty state when no answers exist"], "key_exports": ["AnswerBoard"], "onboarding_reason": "Important UI component for the core answer display functionality in study sessions."}, "components/DrawingCanvas.tsx": {"importance_score": 6, "summary": "Advanced React component providing a collaborative drawing canvas using Fabric.js with tools like pen, eraser, and real-time drawing synchronization.", "responsibilities": ["Implements drawing functionality with Fabric.js canvas", "Provides drawing tools (pen, eraser) with customizable properties", "Handles canvas state management and change notifications", "Supports both interactive and read-only modes"], "key_exports": ["DrawingCanvas"], "onboarding_reason": "Complex component that adds drawing capabilities to study sessions - key for understanding collaborative features."}, "components/DrawingViewer.tsx": {"importance_score": 4, "summary": "React component for displaying saved drawing data in read-only mode, handling canvas rendering and positioning of drawing objects.", "responsibilities": ["Renders drawing data from JSON in read-only mode", "Handles canvas initialization and cleanup", "Centers drawing content within canvas bounds", "Manages Fabric.js path object creation and positioning"], "key_exports": ["DrawingViewer"], "onboarding_reason": "Supporting component for viewing completed drawings - less critical but useful for understanding drawing data flow."}, "components/KickModal.tsx": {"importance_score": 3, "summary": "Modal dialog component for confirming user removal from study rooms, providing a confirmation interface for hosts.", "responsibilities": ["Displays confirmation dialog for kicking users", "Provides cancel and confirm actions", "Shows user information in confirmation message", "Implements modal overlay with proper styling"], "key_exports": ["KickModal"], "onboarding_reason": "Simple modal component for room management - minor feature that's easy to understand."}, "components/KickedModal.tsx": {"importance_score": 3, "summary": "Modal component shown to users who have been kicked from a room, providing navigation back to the home page.", "responsibilities": ["Displays notification when user is kicked", "Provides navigation back to home page", "Shows appropriate messaging and styling", "Handles router navigation"], "key_exports": ["KickedModal"], "onboarding_reason": "Simple notification modal - straightforward component that handles edge case user flow."}, "components/ParticipantsSidebar.tsx": {"importance_score": 7, "summary": "Comprehensive sidebar component displaying room participants with status indicators, host identification, and user management controls.", "responsibilities": ["Displays list of room participants with online status", "Shows host identification with crown icon", "Indicates answer status for each participant", "Provides kick functionality for room hosts"], "key_exports": ["ParticipantsSidebar"], "onboarding_reason": "Critical UI component for room management and participant awareness - central to collaborative features."}, "components/PrivateAnswerPad.tsx": {"importance_score": 4, "summary": "Simple textarea component for users to input their private answers before submission to the study session.", "responsibilities": ["Provides textarea input for user answers", "Handles value changes and disabled states", "Displays appropriate labels and styling", "Manages focus and accessibility"], "key_exports": ["PrivateAnswerPad"], "onboarding_reason": "Basic input component for core answer functionality - simple but essential for user interaction."}, "components/QuestionPrompt.tsx": {"importance_score": 5, "summary": "Versatile component for displaying or editing study questions, supporting both editable and read-only modes.", "responsibilities": ["Displays study questions in read-only or editable mode", "Handles question text changes for hosts", "Provides appropriate styling for different states", "Shows placeholder text for empty questions"], "key_exports": ["QuestionPrompt"], "onboarding_reason": "Important component for question management - core to understanding how study sessions work."}, "components/RevealButton.tsx": {"importance_score": 4, "summary": "Simple button component that allows hosts to reveal all submitted answers to participants in the study room.", "responsibilities": ["Provides reveal functionality for hosts", "Handles click events and disabled states", "Shows appropriate styling and hover effects", "Manages button accessibility"], "key_exports": ["RevealButton"], "onboarding_reason": "Simple but key component for the answer reveal workflow - easy to understand core functionality."}, "components/RoomIdInput.tsx": {"importance_score": 3, "summary": "Basic input component for entering room IDs when joining existing study sessions.", "responsibilities": ["Provides input field for room ID entry", "Handles value changes and validation", "Shows appropriate labels and placeholders", "Manages input styling and focus states"], "key_exports": ["RoomIdInput"], "onboarding_reason": "Simple input component for room joining - straightforward and easy to understand."}, "components/Timer.tsx": {"importance_score": 3, "summary": "Display component that formats and shows a countdown timer in minutes:seconds format for study sessions.", "responsibilities": ["Displays countdown timer in MM:SS format", "Formats seconds into readable time display", "Provides consistent timer styling", "Shows remaining time for study activities"], "key_exports": ["Timer", "formatTime"], "onboarding_reason": "Simple utility component for time display - minimal complexity but useful for understanding timer features."}, "components/UsernameInput.tsx": {"importance_score": 3, "summary": "A React component that renders a labeled input field for collecting usernames with validation styling.", "responsibilities": ["Render a controlled input field for username entry", "Display validation indicator with required field styling", "Handle input change events and propagate values to parent", "Provide consistent form styling with Tailwind CSS"], "key_exports": ["UsernameInput"], "onboarding_reason": "A simple UI component that new developers can understand to learn the project's form input patterns and styling conventions."}, "lib/keys.ts": {"importance_score": 5, "summary": "Defines constants for localStorage keys used throughout the application for storing user data.", "responsibilities": ["Centralize localStorage key definitions", "Provide consistent naming for user ID storage", "Provide consistent naming for username storage"], "key_exports": ["LS_USER_ID", "LS_USERNAME"], "onboarding_reason": "Essential for understanding how user state is persisted in the browser and avoiding key naming conflicts."}, "lib/prisma.ts": {"importance_score": 8, "summary": "Configures and exports the Prisma database client with connection retry logic and development logging.", "responsibilities": ["Initialize Prisma client with environment-specific configuration", "Implement connection retry mechanism for database resilience", "Configure development logging for database operations", "Manage singleton pattern for Prisma client across the application"], "key_exports": ["prisma", "prismaWithRetry"], "onboarding_reason": "Critical for understanding how the application connects to the database and handles connection failures."}, "next-env.d.ts": {"importance_score": 0, "summary": "Auto-generated TypeScript declarations for Next.js, should not be manually edited.", "responsibilities": ["Provide TypeScript support for Next.js features"], "key_exports": [], "onboarding_reason": "Generated file that developers should not modify or need to understand in detail."}, "package-lock.json": {"importance_score": 0, "summary": "Auto-generated lockfile containing exact dependency versions for reproducible builds.", "responsibilities": ["Lock dependency versions for consistent installations"], "key_exports": [], "onboarding_reason": "Generated lockfile that developers don't need to read or understand for onboarding."}, "package.json": {"importance_score": 2, "summary": "Project configuration file defining dependencies, scripts, and metadata for the StudyCore application.", "responsibilities": ["Define project dependencies and dev dependencies", "Configure build and development scripts", "Set up Prisma schema location", "Define project metadata and repository information"], "key_exports": [], "onboarding_reason": "Useful for understanding project dependencies, available scripts, and overall project structure."}, "pages/_app.tsx": {"importance_score": 9, "summary": "Next.js application root component that wraps all pages and includes global CSS imports.", "responsibilities": ["Initialize the Next.js application wrapper", "Import global CSS styles", "Provide common layout or providers for all pages", "Handle application-wide state or configuration"], "key_exports": ["MyApp"], "onboarding_reason": "Critical entry point that every Next.js developer must understand as it affects every page in the application."}, "pages/api/debug-db.ts": {"importance_score": 2, "summary": "API endpoint for testing database connectivity and troubleshooting connection issues.", "responsibilities": ["Test Prisma database connection", "Log connection status and environment variables", "Provide debugging information for database issues", "Execute simple database queries to verify functionality"], "key_exports": ["handler"], "onboarding_reason": "Useful debug utility for developers to verify database setup but not essential for understanding core application logic."}, "pages/api/debug.ts": {"importance_score": 2, "summary": "API endpoint for testing Prisma client functionality and connection status.", "responsibilities": ["Test Prisma client creation and connection", "Verify environment configuration", "Provide debug information for development", "Handle Prisma import and initialization errors"], "key_exports": ["handler"], "onboarding_reason": "Debug utility that helps verify Prisma setup but not needed for understanding main application features."}, "pages/api/room.ts": {"importance_score": 7, "summary": "API endpoint for creating new study rooms with host assignment and error handling.", "responsibilities": ["Handle POST requests to create new rooms", "Validate required hostId parameter", "Use database retry logic for resilient room creation", "Return structured API responses with error codes"], "key_exports": ["handler"], "onboarding_reason": "Important API endpoint that demonstrates room creation flow and error handling patterns used throughout the application."}, "pages/api/room/[roomId].ts": {"importance_score": 8, "summary": "API endpoint for managing individual rooms, handling room retrieval and updates with question/answer clearing logic.", "responsibilities": ["Handle GET requests to fetch room data", "Handle PATCH requests to update room questions and revelation status", "Implement transaction logic for clearing answers when new questions are set", "Validate room existence and input parameters"], "key_exports": ["handler"], "onboarding_reason": "Core API endpoint that demonstrates the room management workflow and complex update logic with answer clearing."}, "pages/api/room/[roomId]/answers.ts": {"importance_score": 7, "summary": "API endpoint for managing answers within rooms, supporting both text and drawing data with user management.", "responsibilities": ["Handle GET requests to fetch all answers for a room", "Handle POST requests to create new answers with text or drawing data", "Transform drawing data between JSON storage and frontend format", "Manage user creation and updates within rooms"], "key_exports": ["handler"], "onboarding_reason": "Key API endpoint that shows how the application handles different answer types and user management within study rooms."}, "pages/api/room/[roomId]/kick.ts": {"importance_score": 6, "summary": "API endpoint for kicking users from a room, restricted to room hosts only.", "responsibilities": ["Validates host permissions before allowing user removal", "Removes target user and all their answers from the room", "Prevents hosts from kicking themselves", "Returns appropriate error messages for various failure cases"], "key_exports": ["handler"], "onboarding_reason": "Important for understanding room moderation features and database cleanup patterns."}, "pages/api/room/[roomId]/users.ts": {"importance_score": 7, "summary": "API endpoint managing user operations within rooms including joining, listing, and leaving.", "responsibilities": ["Handles user joining/rejoining rooms with username updates", "Fetches and sorts room participants (host first)", "Manages user removal from rooms", "Updates user activity timestamps"], "key_exports": ["handler"], "onboarding_reason": "Critical for understanding user management within rooms and the core interaction patterns."}, "pages/api/test-connection.ts": {"importance_score": 2, "summary": "Development utility for testing database connection configuration.", "responsibilities": ["Validates DATABASE_URL environment variable exists", "Checks basic connection string format", "Returns connection status for debugging"], "key_exports": ["handler"], "onboarding_reason": "Development utility that can be skipped unless debugging database connectivity issues."}, "pages/api/test.ts": {"importance_score": 2, "summary": "Simple API endpoint for testing environment configuration and basic server functionality.", "responsibilities": ["Returns environment information for debugging", "Validates basic API functionality", "Provides timestamp for request tracking"], "key_exports": ["handler"], "onboarding_reason": "Development utility that can be skipped unless debugging basic server setup."}, "pages/index.tsx": {"importance_score": 9, "summary": "Landing page component providing the main entry point for creating or joining study rooms.", "responsibilities": ["Handles room creation with host assignment", "Manages room joining workflow with validation", "Generates and stores unique user IDs in localStorage", "Provides the main navigation interface for the application"], "key_exports": ["LandingPage"], "onboarding_reason": "Critical entry point that demonstrates the core user flows and application structure."}, "pages/room/[roomId].tsx": {"importance_score": 10, "summary": "Main room interface where users participate in real-time study sessions with questions and answers.", "responsibilities": ["Manages real-time room state with polling mechanisms", "Handles text and drawing answer submissions", "Implements host controls for question management and user moderation", "Coordinates user presence and answer revelation workflows"], "key_exports": ["RoomPage", "apiJSON"], "onboarding_reason": "The core application interface where all main functionality converges - essential for understanding the complete user experience."}, "postcss.config.js": {"importance_score": 1, "summary": "PostCSS configuration file for CSS processing with Tailwind and Autoprefixer.", "responsibilities": ["Configures Tailwind CSS processing", "Enables autoprefixer for CSS compatibility"], "key_exports": [], "onboarding_reason": "Standard build configuration that can be skipped unless modifying CSS processing."}, "prisma/migrations/20250812173833_add_user_tracking/migration.sql": {"importance_score": 4, "summary": "Database migration defining the core schema for rooms, users, and answers with proper relationships.", "responsibilities": ["Creates Room table with question and reveal state", "Establishes User table with room association and activity tracking", "Defines Answer table linking users to their responses", "Sets up foreign key constraints and indexes for data integrity"], "key_exports": [], "onboarding_reason": "Essential for understanding the data model and relationships between rooms, users, and answers."}, "prisma/migrations/migration_lock.toml": {"importance_score": 0, "summary": "Prisma migration lock file specifying the database provider.", "responsibilities": ["Locks database provider to SQLite"], "key_exports": [], "onboarding_reason": "Auto-generated file that should not be modified and can be ignored during onboarding."}, "styles/globals.css": {"importance_score": 1, "summary": "Global CSS file importing Tailwind CSS utilities and base styles.", "responsibilities": ["Imports Tailwind CSS base, components, and utilities"], "key_exports": [], "onboarding_reason": "Simple Tailwind import file that can be skipped unless customizing global styles."}, "tailwind.config.js": {"importance_score": 2, "summary": "Tailwind CSS configuration extending the default theme with custom colors for the application design.", "responsibilities": ["Defines content paths for CSS purging", "Extends theme with green/emerald color palette", "Configures build-time CSS processing"], "key_exports": [], "onboarding_reason": "Configuration file that explains the design system colors but can be skipped unless modifying styling."}, "tsconfig.json": {"importance_score": 1, "summary": "TypeScript configuration file with Next.js specific settings and strict type checking enabled.", "responsibilities": ["Configures TypeScript compilation options", "Enables strict type checking", "Sets up Next.js specific module resolution"], "key_exports": [], "onboarding_reason": "Standard TypeScript configuration that can be skipped unless modifying build settings."}, "vercel.json": {"importance_score": 2, "summary": "Vercel deployment configuration file that specifies build commands, install commands, and framework settings for the Next.js application.", "responsibilities": ["Configure Vercel deployment settings", "Specify database schema generation before build", "Define the Next.js framework for proper deployment handling"], "key_exports": [], "onboarding_reason": "New developers should understand the deployment pipeline but this config file is not critical for daily development work."}}, "onboarding_path": [{"file": "README.md", "summary": "Project documentation explaining the architecture, data model, and workflow of StudyCore - a collaborative study app using PostgreSQL + Prisma.", "reason": "Start with the project documentation to understand the overall architecture, purpose, and core concepts of StudyCore before diving into any code", "importance_score": 8, "responsibilities": ["Documents the complete project architecture and technology stack", "Explains the Prisma data model (Room, User, Answer entities)", "Describes the real-time polling data flow and API structure", "Provides project structure overview and setup guidance"], "key_exports": []}, {"file": "pages/_app.tsx", "summary": "Next.js application root component that wraps all pages and includes global CSS imports.", "reason": "Understand the Next.js application structure and global setup that wraps all components and pages", "importance_score": 9, "responsibilities": ["Initialize the Next.js application wrapper", "Import global CSS styles", "Provide common layout or providers for all pages", "Handle application-wide state or configuration"], "key_exports": ["MyApp"]}, {"file": "lib/prisma.ts", "summary": "Configures and exports the Prisma database client with connection retry logic and development logging.", "reason": "Learn how the database client is configured since this is the foundation for all data operations throughout the application", "importance_score": 8, "responsibilities": ["Initialize Prisma client with environment-specific configuration", "Implement connection retry mechanism for database resilience", "Configure development logging for database operations", "Manage singleton pattern for Prisma client across the application"], "key_exports": ["prisma", "prismaWithRetry"]}, {"file": "pages/index.tsx", "summary": "Landing page component providing the main entry point for creating or joining study rooms.", "reason": "See the main entry point where users start their journey - creating or joining study rooms", "importance_score": 9, "responsibilities": ["Handles room creation with host assignment", "Manages room joining workflow with validation", "Generates and stores unique user IDs in localStorage", "Provides the main navigation interface for the application"], "key_exports": ["LandingPage"]}, {"file": "pages/api/room.ts", "summary": "API endpoint for creating new study rooms with host assignment and error handling.", "reason": "Understand how new study rooms are created via the API, which connects to the landing page functionality", "importance_score": 7, "responsibilities": ["Handle POST requests to create new rooms", "Validate required hostId parameter", "Use database retry logic for resilient room creation", "Return structured API responses with error codes"], "key_exports": ["handler"]}, {"file": "pages/api/room/[roomId].ts", "summary": "API endpoint for managing individual rooms, handling room retrieval and updates with question/answer clearing logic.", "reason": "Learn how individual rooms are managed, retrieved, and updated - the core room operations", "importance_score": 8, "responsibilities": ["Handle GET requests to fetch room data", "Handle PATCH requests to update room questions and revelation status", "Implement transaction logic for clearing answers when new questions are set", "Validate room existence and input parameters"], "key_exports": ["handler"]}, {"file": "pages/api/room/[roomId]/users.ts", "summary": "API endpoint managing user operations within rooms including joining, listing, and leaving.", "reason": "Understand user management within rooms (joining, listing, leaving) before exploring the main room interface", "importance_score": 7, "responsibilities": ["Handles user joining/rejoining rooms with username updates", "Fetches and sorts room participants (host first)", "Manages user removal from rooms", "Updates user activity timestamps"], "key_exports": ["handler"]}, {"file": "pages/room/[roomId].tsx", "summary": "Main room interface where users participate in real-time study sessions with questions and answers.", "reason": "Explore the main collaborative study interface where users interact - this is the heart of the application", "importance_score": 10, "responsibilities": ["Manages real-time room state with polling mechanisms", "Handles text and drawing answer submissions", "Implements host controls for question management and user moderation", "Coordinates user presence and answer revelation workflows"], "key_exports": ["RoomPage", "apiJSON"]}, {"file": "components/ParticipantsSidebar.tsx", "summary": "Comprehensive sidebar component displaying room participants with status indicators, host identification, and user management controls.", "reason": "Understand how participants are displayed and managed in the room interface", "importance_score": 7, "responsibilities": ["Displays list of room participants with online status", "Shows host identification with crown icon", "Indicates answer status for each participant", "Provides kick functionality for room hosts"], "key_exports": ["ParticipantsSidebar"]}, {"file": "pages/api/room/[roomId]/answers.ts", "summary": "API endpoint for managing answers within rooms, supporting both text and drawing data with user management.", "reason": "Learn how answers (text and drawing) are handled in the backend to support the room interface", "importance_score": 7, "responsibilities": ["Handle GET requests to fetch all answers for a room", "Handle POST requests to create new answers with text or drawing data", "Transform drawing data between JSON storage and frontend format", "Manage user creation and updates within rooms"], "key_exports": ["handler"]}, {"file": "components/DrawingCanvas.tsx", "summary": "Advanced React component providing a collaborative drawing canvas using Fabric.js with tools like pen, eraser, and real-time drawing synchronization.", "reason": "Explore the advanced collaborative drawing functionality that enables visual answers and real-time collaboration", "importance_score": 6, "responsibilities": ["Implements drawing functionality with Fabric.js canvas", "Provides drawing tools (pen, eraser) with customizable properties", "Handles canvas state management and change notifications", "Supports both interactive and read-only modes"], "key_exports": ["DrawingCanvas"]}, {"file": "pages/api/room/[roomId]/kick.ts", "summary": "API endpoint for kicking users from a room, restricted to room hosts only.", "reason": "Understand the host-only user management feature that completes the room administration capabilities", "importance_score": 6, "responsibilities": ["Validates host permissions before allowing user removal", "Removes target user and all their answers from the room", "Prevents hosts from kicking themselves", "Returns appropriate error messages for various failure cases"], "key_exports": ["handler"]}]}