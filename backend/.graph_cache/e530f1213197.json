{"files": ["EXPECTED_OUTCOMES.md", "IMPLEMENTATION.md", "README.md", "analysis/__init__.py", "analysis/explainer.py", "analysis/matcher.py", "app.py", "config.py", "extraction/__init__.py", "extraction/llm_extractor.py", "extraction/pdf_parser.py", "models/__init__.py", "models/schemas.py", "render.yaml", "requirements.txt", "runtime.txt", "static/css/style.css", "templates/base.html", "templates/index.html", "templates/results.html"], "edges": [{"source": "analysis/__init__.py", "target": "analysis/matcher.py"}, {"source": "analysis/__init__.py", "target": "analysis/explainer.py"}, {"source": "analysis/explainer.py", "target": "config.py"}, {"source": "analysis/explainer.py", "target": "models/schemas.py"}, {"source": "analysis/matcher.py", "target": "config.py"}, {"source": "analysis/matcher.py", "target": "models/schemas.py"}, {"source": "app.py", "target": "config.py"}, {"source": "app.py", "target": "extraction/__init__.py"}, {"source": "app.py", "target": "analysis/__init__.py"}, {"source": "extraction/__init__.py", "target": "extraction/pdf_parser.py"}, {"source": "extraction/__init__.py", "target": "extraction/llm_extractor.py"}, {"source": "extraction/llm_extractor.py", "target": "config.py"}, {"source": "extraction/llm_extractor.py", "target": "models/schemas.py"}, {"source": "extraction/llm_extractor.py", "target": "extraction/pdf_parser.py"}, {"source": "models/__init__.py", "target": "models/schemas.py"}], "root": "/Users/synonymrolls/Desktop/h@b/h-b-2026/backend/.repos/e530f1213197", "file_analyses": {"EXPECTED_OUTCOMES.md": {"importance_score": 2, "summary": "Documentation file defining expected test results for three AP invoice matching scenarios with their expected approval statuses.", "responsibilities": ["Document expected outcomes for clean match scenario", "Define price variance test case expectations", "Specify quantity variance and missing receipt test expectations"], "key_exports": [], "onboarding_reason": "Useful for understanding test scenarios but not critical for understanding the codebase architecture."}, "IMPLEMENTATION.md": {"importance_score": 3, "summary": "Comprehensive implementation guide and architecture documentation for the AP invoice analyzer project. Contains system design, file structure, and development phases.", "responsibilities": ["Document overall system architecture and technology choices", "Define file structure and component organization", "Outline implementation phases and development approach", "Explain the 3-way matching process flow"], "key_exports": [], "onboarding_reason": "Essential for understanding the project structure and implementation approach but is documentation rather than executable code."}, "README.md": {"importance_score": 4, "summary": "Project documentation providing setup instructions, feature overview, and usage examples for the AP invoice exception analyzer.", "responsibilities": ["Document installation and setup procedures", "Explain application features and capabilities", "Provide sample scenario descriptions", "Document API usage and configuration options"], "key_exports": [], "onboarding_reason": "Important for getting started with the project but focuses on usage rather than code structure."}, "analysis/__init__.py": {"importance_score": 6, "summary": "Package initialization file exposing key analysis functions for document matching and explanation generation.", "responsibilities": ["Export match_documents function for 3-way matching", "Export generate_explanation for LLM-powered explanations", "Export generate_quick_summary for brief analysis summaries", "Provide clean API interface for analysis module"], "key_exports": ["match_documents", "generate_explanation", "generate_quick_summary"], "onboarding_reason": "Shows the main entry points for the analysis functionality that drives the core business logic."}, "analysis/explainer.py": {"importance_score": 7, "summary": "LLM-powered explanation generator that converts technical match results into plain-English summaries and actionable recommendations for AP clerks.", "responsibilities": ["Generate human-readable explanations of match results using Claude API", "Format exception details into business-friendly language", "Provide actionable recommendations for each exception type", "Update match results with detailed analysis and summaries"], "key_exports": ["generate_explanation", "EXPLANATION_PROMPT", "client"], "onboarding_reason": "Critical for understanding how technical results are translated into user-friendly explanations that drive business decisions."}, "analysis/matcher.py": {"importance_score": 8, "summary": "Core 3-way matching algorithm that compares Purchase Orders, Invoices, and Goods Receipts to detect discrepancies and generate exception reports.", "responsibilities": ["Implement 3-way matching logic between PO, Invoice, and Receipt", "Detect price variances, quantity mismatches, and missing items", "Calculate match scores and determine approval recommendations", "Generate structured exception reports with severity levels"], "key_exports": ["match_documents", "_match_line_items_po_invoice", "_calculate_match_score"], "onboarding_reason": "This is the heart of the business logic - understanding this file is essential for grasping how the system detects and categorizes financial discrepancies."}, "app.py": {"importance_score": 9, "summary": "Flask application entry point that provides the web interface for uploading documents and displaying analysis results.", "responsibilities": ["Handle file uploads and validation for PDF/TXT documents", "Coordinate the analysis pipeline from parsing to explanation", "Render web UI templates with match results", "Manage temporary file storage and cleanup"], "key_exports": ["app", "analyze", "index", "analyze_uploaded_files"], "onboarding_reason": "This is the main application entry point - start here to understand how users interact with the system and how all components connect."}, "config.py": {"importance_score": 5, "summary": "Central configuration file containing API keys, matching thresholds, file settings, and application parameters.", "responsibilities": ["Manage environment variables and API configurations", "Define matching tolerance thresholds for price and quantity variance", "Configure Flask application settings and file upload parameters", "Define sample document scenarios and paths"], "key_exports": ["ANTHROPIC_API_KEY", "PRICE_TOLERANCE_PERCENT", "SAMPLE_SCENARIOS", "CLAUDE_MODEL"], "onboarding_reason": "Important for understanding how the system can be configured and what parameters control the matching behavior."}, "extraction/__init__.py": {"importance_score": 6, "summary": "Package initialization file exposing document parsing and LLM extraction functions for converting PDFs to structured data.", "responsibilities": ["Export document parsing functions for PDF and text files", "Export LLM extraction functions for different document types", "Provide unified interface for document processing pipeline", "Export data structures for parsed documents"], "key_exports": ["parse_document", "extract_document", "ParsedDocument", "extract_purchase_order"], "onboarding_reason": "Shows the entry points for the extraction pipeline that converts raw documents into structured data for analysis."}, "extraction/llm_extractor.py": {"importance_score": 7, "summary": "LLM integration module that uses Claude API to extract structured data from parsed documents, converting unstructured text into Pydantic models.", "responsibilities": ["Convert raw document text into structured JSON using Claude API", "Handle document-specific extraction prompts for PO, Invoice, and Receipt", "Implement retry logic and error handling for API calls", "Transform LLM responses into validated Pydantic models"], "key_exports": ["extract_document", "extract_purchase_order", "PO_EXTRACTION_PROMPT", "client"], "onboarding_reason": "Critical for understanding how unstructured documents are converted to structured data that enables the matching logic."}, "extraction/pdf_parser.py": {"importance_score": 6, "summary": "PDF parsing module that extracts text and tables from documents using pdfplumber, supporting both PDF and plain text files.", "responsibilities": ["Extract text and table data from PDF documents using pdfplumber", "Handle plain text file parsing as alternative input method", "Clean and structure extracted table data for LLM processing", "Provide unified parsing interface for different file types"], "key_exports": ["parse_document", "parse_pdf", "ParsedDocument", "format_for_llm"], "onboarding_reason": "Important for understanding how raw documents are processed before LLM extraction, but less critical than the business logic components."}, "models/__init__.py": {"importance_score": 5, "summary": "Package initialization file exposing core data models and schemas used throughout the application.", "responsibilities": ["Export Pydantic models for financial documents", "Export exception and matching result data structures", "Export enums for exception types and severity levels", "Provide centralized access to all data models"], "key_exports": ["PurchaseOrder", "Invoice", "GoodsReceipt", "MatchResult", "ExceptionType"], "onboarding_reason": "Essential for understanding the data structures that flow through the system, though the actual model definitions are in schemas.py."}, "models/schemas.py": {"importance_score": 8, "summary": "Defines comprehensive Pydantic data models for purchase orders, invoices, goods receipts, and exception analysis results. Serves as the core data contracts for the entire AP invoice exception analyzer.", "responsibilities": ["Define structured data models for financial documents (PO, Invoice, Receipt)", "Specify exception types and severity levels for 3-way matching discrepancies", "Provide validation schemas for document processing and analysis results", "Establish data contracts between document extraction and matching logic"], "key_exports": ["LineItem", "PurchaseOrder", "Invoice", "GoodsReceipt", "ExceptionType", "ExceptionSeverity", "MatchException", "MatchResult"], "onboarding_reason": "Essential to understand the core data structures and business logic flow throughout the application."}, "render.yaml": {"importance_score": 1, "summary": "Deployment configuration for Render cloud platform. Specifies Python runtime, build commands, and environment variables.", "responsibilities": ["Configure production deployment settings", "Define environment variables and runtime requirements"], "key_exports": [], "onboarding_reason": "Only relevant for understanding deployment setup, not core application logic."}, "requirements.txt": {"importance_score": 2, "summary": "Python package dependencies including Flask, Pydantic, PDF processing, Anthropic API, and testing libraries.", "responsibilities": ["Define all Python package dependencies", "Specify minimum versions for compatibility"], "key_exports": [], "onboarding_reason": "Useful for understanding the technology stack but not critical for understanding business logic."}, "runtime.txt": {"importance_score": 1, "summary": "Specifies Python 3.11.0 runtime version for deployment platforms.", "responsibilities": ["Define Python runtime version"], "key_exports": [], "onboarding_reason": "Minor configuration file with no impact on application functionality."}, "static/css/style.css": {"importance_score": 2, "summary": "CSS styles for the web interface including variables, layout, cards, alerts, and responsive design for the invoice analyzer UI.", "responsibilities": ["Define visual styling and layout for web interface", "Provide responsive design and component styles", "Establish CSS variables for consistent theming"], "key_exports": [], "onboarding_reason": "Only important if working on frontend styling, not core functionality."}, "templates/base.html": {"importance_score": 4, "summary": "Base HTML template providing common structure, navigation header, flash message handling, and footer for all pages.", "responsibilities": ["Define common page structure and navigation", "Handle flash message display across pages", "Provide consistent header and footer elements"], "key_exports": [], "onboarding_reason": "Important for understanding the overall UI structure but secondary to core business logic."}, "templates/index.html": {"importance_score": 5, "summary": "Main upload page template allowing users to upload PO, Invoice, and Receipt files with client-side validation and workflow explanation.", "responsibilities": ["Provide file upload interface for documents", "Implement client-side form validation", "Display workflow explanation to users"], "key_exports": [], "onboarding_reason": "Important entry point for understanding user workflow and file upload process."}, "templates/results.html": {"importance_score": 6, "summary": "Results display template showing analysis outcomes, document details, exceptions found, and recommendations with detailed formatting.", "responsibilities": ["Display analysis results and recommendations", "Present document comparison details", "Show exceptions with explanations and severity levels", "Format match scores and business impact information"], "key_exports": [], "onboarding_reason": "Critical for understanding how analysis results are presented to users and what information is surfaced."}}, "onboarding_path": [{"file": "app.py", "summary": "Flask application entry point that provides the web interface for uploading documents and displaying analysis results.", "reason": "Start with the main Flask application entry point to understand the overall system architecture, web endpoints, and how users interact with the AP invoice analyzer.", "importance_score": 9, "responsibilities": ["Handle file uploads and validation for PDF/TXT documents", "Coordinate the analysis pipeline from parsing to explanation", "Render web UI templates with match results", "Manage temporary file storage and cleanup"], "key_exports": ["app", "analyze", "index", "analyze_uploaded_files"]}, {"file": "models/schemas.py", "summary": "Defines comprehensive Pydantic data models for purchase orders, invoices, goods receipts, and exception analysis results. Serves as the core data contracts for the entire AP invoice exception analyzer.", "reason": "Learn the core data structures and contracts that define how purchase orders, invoices, goods receipts, and analysis results are represented throughout the system.", "importance_score": 8, "responsibilities": ["Define structured data models for financial documents (PO, Invoice, Receipt)", "Specify exception types and severity levels for 3-way matching discrepancies", "Provide validation schemas for document processing and analysis results", "Establish data contracts between document extraction and matching logic"], "key_exports": ["LineItem", "PurchaseOrder", "Invoice", "GoodsReceipt", "ExceptionType", "ExceptionSeverity", "MatchException", "MatchResult"]}, {"file": "extraction/pdf_parser.py", "summary": "PDF parsing module that extracts text and tables from documents using pdfplumber, supporting both PDF and plain text files.", "reason": "Understand how raw PDF documents are processed and converted into text that can be further analyzed by the system.", "importance_score": 6, "responsibilities": ["Extract text and table data from PDF documents using pdfplumber", "Handle plain text file parsing as alternative input method", "Clean and structure extracted table data for LLM processing", "Provide unified parsing interface for different file types"], "key_exports": ["parse_document", "parse_pdf", "ParsedDocument", "format_for_llm"]}, {"file": "extraction/llm_extractor.py", "summary": "LLM integration module that uses Claude API to extract structured data from parsed documents, converting unstructured text into Pydantic models.", "reason": "See how unstructured document text is transformed into structured Pydantic models using LLM integration, building on the PDF parsing foundation.", "importance_score": 7, "responsibilities": ["Convert raw document text into structured JSON using Claude API", "Handle document-specific extraction prompts for PO, Invoice, and Receipt", "Implement retry logic and error handling for API calls", "Transform LLM responses into validated Pydantic models"], "key_exports": ["extract_document", "extract_purchase_order", "PO_EXTRACTION_PROMPT", "client"]}, {"file": "extraction/__init__.py", "summary": "Package initialization file exposing document parsing and LLM extraction functions for converting PDFs to structured data.", "reason": "Review the extraction package interface that orchestrates PDF parsing and LLM extraction into a cohesive document processing pipeline.", "importance_score": 6, "responsibilities": ["Export document parsing functions for PDF and text files", "Export LLM extraction functions for different document types", "Provide unified interface for document processing pipeline", "Export data structures for parsed documents"], "key_exports": ["parse_document", "extract_document", "ParsedDocument", "extract_purchase_order"]}, {"file": "analysis/matcher.py", "summary": "Core 3-way matching algorithm that compares Purchase Orders, Invoices, and Goods Receipts to detect discrepancies and generate exception reports.", "reason": "Dive into the core business logic that performs 3-way matching between documents to identify discrepancies and generate exceptions.", "importance_score": 8, "responsibilities": ["Implement 3-way matching logic between PO, Invoice, and Receipt", "Detect price variances, quantity mismatches, and missing items", "Calculate match scores and determine approval recommendations", "Generate structured exception reports with severity levels"], "key_exports": ["match_documents", "_match_line_items_po_invoice", "_calculate_match_score"]}, {"file": "analysis/explainer.py", "summary": "LLM-powered explanation generator that converts technical match results into plain-English summaries and actionable recommendations for AP clerks.", "reason": "Understand how technical matching results are converted into user-friendly explanations and recommendations for AP clerks.", "importance_score": 7, "responsibilities": ["Generate human-readable explanations of match results using Claude API", "Format exception details into business-friendly language", "Provide actionable recommendations for each exception type", "Update match results with detailed analysis and summaries"], "key_exports": ["generate_explanation", "EXPLANATION_PROMPT", "client"]}, {"file": "analysis/__init__.py", "summary": "Package initialization file exposing key analysis functions for document matching and explanation generation.", "reason": "See how the analysis components are packaged together to provide a clean interface for the main application.", "importance_score": 6, "responsibilities": ["Export match_documents function for 3-way matching", "Export generate_explanation for LLM-powered explanations", "Export generate_quick_summary for brief analysis summaries", "Provide clean API interface for analysis module"], "key_exports": ["match_documents", "generate_explanation", "generate_quick_summary"]}, {"file": "templates/results.html", "summary": "Results display template showing analysis outcomes, document details, exceptions found, and recommendations with detailed formatting.", "reason": "Finally, examine how analysis results are presented to users in the web interface, completing the end-to-end user experience.", "importance_score": 6, "responsibilities": ["Display analysis results and recommendations", "Present document comparison details", "Show exceptions with explanations and severity levels", "Format match scores and business impact information"], "key_exports": []}]}